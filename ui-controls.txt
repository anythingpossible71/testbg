// UI Control Functions

// Initialize UI elements and event listeners
function setupUIControls() {
    // Create Game button
    document.getElementById('create-game-button').addEventListener('click', createNewGame);
    
    // Join Game button
    document.getElementById('join-game-button').addEventListener('click', joinGame);
    
    // Roll Dice button
    document.getElementById('roll-button').addEventListener('click', rollDice);
    
    // Copy URL button
    document.getElementById('copy-url-button').addEventListener('click', copyGameUrl);
    
    // Initially hide certain UI elements
    document.getElementById('join-game-ui').style.display = 'none';
    document.getElementById('game-controls-ui').style.display = 'none';
}

// Create a new game
function createNewGame() {
    hostName = document.getElementById('player-name-input').value || 'Player 1';
    
    // Generate a unique game ID
    gameId = generateUniqueId();
    
    // Set player role to host
    playerRole = "host";
    
    // Update UI
    document.getElementById('player1-name').innerText = hostName + " (White)";
    document.getElementById('player2-name').innerText = "Waiting for opponent... (Black)";
    
    // Update URL with game ID
    const newUrl = window.location.origin + window.location.pathname + '?game=' + gameId;
    window.history.pushState({}, '', newUrl);
    
    // Update game URL display
    document.getElementById('game-url').value = newUrl;
    
    // Show/hide appropriate UI sections
    document.getElementById('create-game-ui').style.display = 'none';
    document.getElementById('join-game-ui').style.display = 'block';
    document.getElementById('game-controls-ui').style.display = 'block';
    
    // Make player 1 card active
    document.getElementById('player1-card').classList.add('active');
    
    // Initialize the game
    initializeBoard();
    gameStatus = "Waiting for opponent...";
    updateGameStatus();
    
    // Save initial game state to Firebase
    saveGameState();
}

// Join an existing game
function joinGame() {
    if (playerRole !== "spectator" || !gameId) return;
    
    guestName =
